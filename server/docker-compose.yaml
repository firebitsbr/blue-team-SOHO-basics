version: '3'

volumes:
	data:
	config:
	db:

services:
	nextcloud-db:
		image: mariadb
		container_name: nextcloud-db
		restart: unless-stopped
		volumes:
			- ./db:/var/lib/mysql
		environment:
			- MYSQL_ROOT_PASSWORD=
			- MYSQL_PASSWORD=
			- MYSQL_DATABASE=nextcloud
			- MYSQL_USER=nextcloud
	nextcloud:
		image: nextcloud
		container_name: nextcloud
    restart: unless-stopped
		ports:
			- 80:80
      - 443:443
		depends_on:
			- nextcloud-db
		volumes:
			- ./config:/var/www/html/config
      - ./data:var/www/html/data
